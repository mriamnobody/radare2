NAME=asm.trace
FILE=bins/mach0/main-loop
CMDS=<<EOF
af
e asm.flags.inline=true
e asm.comments=false
e asm.trace=1
e dbg.trace=1
aeim
e asm.bytes=0
s main
30ds
pdf
EOF
EXPECT=<<EOF
            ;-- section.0.__TEXT.__text, entry0, sym._main, sym.func.100003f84:
/ 36: int main (int argc);
|           ; arg int argc @ x0
|           ; var int64_t var_8h @ sp+0x8
|           0x100003f84 00:0000        sub sp, sp, 0x10
|           0x100003f88 00:0000        str wzr, [sp, 0xc]
|           0x100003f8c 00:0000        mov w8, 3
|           0x100003f90 00:0000        str w8, [sp, 8]
|       ,=< 0x100003f94 00:0000        b 0x100003f98
|      .`-> 0x100003f98 06:0026        ldr w8, [var_8h]
|      :    0x100003f9c 06:0027        add w8, w8, 1
|      :    0x100003fa0 05:0024        str w8, [sp, 8]
|      |    ;-- pc:
\      `==< 0x100003fa4 06:0025        b 0x100003f98
EOF
RUN

